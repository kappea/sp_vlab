$.swipebox=function(t,e){var i={hideBarsDelay:3e3,hrefAttr:"href",titleAttr:"title",copyrightAtrr:"data-copyright",imagelabel:"data-imagelabel",creditsAtrr:"data-credits",hresUrlAttr:"data-action",hresTextAttr:"data-actionText",nextBtnTxt:"Volgende",prevBtnTxt:"Vorige",closeBtnTxt:"Sluiten",type:"gallery",content:"img",displayType:"desktop",isOpen:!1,lastFocus:"",page:$("#mainwrapper"),overlay:"",modal:"",slider:"",currSlide:"",slides:"",nextBtn:"",prevBtn:"",closeBtn:"",state:"ready"},s=this,n=0,a=$("html"),o=$(t),r=!1;void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints;s.settings={},s.init=function(){s.settings=$.extend({},i,e),o.on("click",function(t){t.preventDefault(),n=o.index($(this)),d.init(n)})};var d={init:function(t){r||this.build(),"video"===s.settings.content?(this.preloadVideo(t,"play"),this.setVideoQue(t),this.openSlide(t),s.settings.currSlide=s.settings.slides.eq(t)):(this.openSlide(t),this.openImg(t),this.preloadImg(t+1),this.preloadImg(t-1))},build:function(){var t=this,e=o.attr("data-closeimage")||s.settings.closeBtnTxt,i=o.attr("data-nextimage")||s.settings.nextBtnTxt,a=o.attr("data-previmage")||s.settings.prevBtnTxt,d="imageOverlay";"video"===s.settings.content&&(d="videoOverlay");var l='<div id="swipebox-overlay" class="'+d+'" aria-hidden="true" role="dialog">';l+='<div id="swipebox-modal" role="document" tabindex="-1">',l+='<div id="swipebox-slider"></div>',l+='<div id="swipebox-caption">',l+='<div class="caption-meta"><p class="title"></p><p class="check copyright"></p><p class="meta"></p><p class="hres"></p>',l+="</div>",l+="</div>",l+='<div id="swipebox-action">',l+='<button id="swipebox-next">'+i+"</button>",l+='<button id="swipebox-prev">'+a+"</button>",l+='<button id="swipebox-close">'+e+"</button>",l+="</div>",l+="</div>",l+="</div>",$("#mainwrapper").append(l),s.settings.page=$("#mainwrapper"),s.settings.overlay=$("#swipebox-overlay"),s.settings.modal=$("#swipebox-modal"),s.settings.slider=$("#swipebox-slider"),s.settings.nextBtn=$("#swipebox-next"),s.settings.prevBtn=$("#swipebox-prev"),s.settings.closeBtn=$("#swipebox-close"),window.addEventListener("keypress",this.holdFocus()),o.each(function(){s.settings.slider.append('<div class="slide"></div>')}),s.settings.slides=s.settings.slider.find(".slide"),t.actions(),t.keyboard(),t.setScreenType(),t.positionNextPrevBtns(),$(window).on("orientationchange resize",function(){t.setScreenType(),t.setSlideSize(n),t.positionNextPrevBtns()}).resize(),r=!0},setScreenType:function(){s.settings.displayType=window.getComputedStyle(document.body,":after").getPropertyValue("content")||"desktop"},getAttribValue:function(t,e){return"data-"===s.settings[e].substr(0,5)?t.data(s.settings[e].replace("data-","")):t.attr(s.settings[e])},holdFocus:function(t){document.addEventListener("focus",function(t){var e=document.getElementById("swipebox-modal");s.settings.isOpen&&!e.contains(t.target)&&(t.preventDefault(),s.settings.modal.focus())},!0)},clearTimeout:function(){window.clearTimeout(this.timeout),this.timeout=null},keyboard:function(){var t=this;$(window).bind("keyup",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode?t.getPrev():39===e.keyCode?t.getNext():27===e.keyCode?t.closeSlide():13===e.keyCode&&s.settings.slider.click()})},actions:function(){var t=this;"gallery"===s.settings.type?o.length<2?(s.settings.nextBtn.hide(),s.settings.prevBtn.hide()):(s.settings.prevBtn.on("click",function(e){e.preventDefault(),e.stopPropagation(),t.getPrev()}),s.settings.nextBtn.on("click",function(e){e.preventDefault(),e.stopPropagation(),t.getNext()}),$(".slide").on("swipeleft",function(e){t.getNext()}),$(".slide").on("swiperight",function(e){t.getPrev()}),$(document).on("scrollstart",function(t){$("body").hasClass("swipebox-overflow-hidden")&&t.preventDefault()})):(s.settings.nextBtn.hide(),s.settings.prevBtn.hide()),s.settings.closeBtn.on("click",function(){t.closeSlide()})},openSlide:function(t){s.settings.lastFocus=document.activeElement,s.settings.isOpen=!0,s.settings.page.attr("aria-hidden","true"),s.settings.overlay.attr("aria-hidden","false"),s.settings.modal.attr("tabindex","0"),setTimeout(function(){s.settings.modal.focus()},1),s.settings.overlay.show().stop().animate({opacity:1},"fast").addClass("visible"),$("body").addClass("swipebox-overflow-hidden"),this.setSlide(t)},setSlide:function(t){""!==s.settings.currSlide&&s.settings.currSlide.removeClass("current"),s.settings.currSlide=s.settings.slides.eq(t),s.settings.state="loading",a.hasClass("cssanimations")?s.settings.slider.css({left:100*-t+"%"}):s.settings.slider.animate({left:100*-t+"%"}),setTimeout(function(){s.settings.state="ready"},500),s.settings.currSlide.addClass("current"),this.setTitle(t),this.setSlideSize(t),this.setCopyright(t),"img"===s.settings.content&&(this.setCredits(t),this.setHres(t),this.setMeta(t)),"gallery"===s.settings.type?(s.settings.nextBtn.removeClass("disabled"),s.settings.prevBtn.removeClass("disabled"),0===t?s.settings.prevBtn.addClass("disabled"):t===o.length-1&&s.settings.nextBtn.addClass("disabled")):(s.settings.nextBtn.addClass("disabled"),s.settings.prevBtn.addClass("disabled"))},preloadImg:function(t){s.settings.slider.addClass("loading");var e=this;setTimeout(function(){e.openImg(t)},1e3)},loadImg:function(t,e,i){var s=$("<img>").on("load",function(){e.call(s)});s.attr("src",t),s.attr("alt",i)},openImg:function(t){s.settings.slider.removeClass("loading");var e=this;if(t<0||t>=o.length)return e.loadImg(),!1;var i,n=this.getAttribValue(o.eq(t),"hrefAttr");i=o.eq(t).is("img")?o.eq(t).attr("alt"):o.eq(t).find("img").attr("alt"),e.loadImg(n,function(){s.settings.slides.eq(t).html(this)},i)},buildVideoElm:function(t){var e=$(t).clone(),i="";e.find(".source").length>0&&(i=e.find(".source")[0].outerHTML.replace("<div ","<source ").replace("</div>","").replace("data-src","src").replace("data-type","type"));var s="";e.find(".track").length>0&&(s=e.find(".track")[0].outerHTML.replace("<div ","<track ").replace("</div>","").replace("data-src","src").replace("data-kind","kind").replace("data-srclang","srclang"));var n=e.find(".video")[0].outerHTML.replace("<div ","<video ").replace("</div>",i+s+"</video>").replace("data-width","width").replace("data-height","height").replace('data-preload="none"','preload="metadata"').replace("data-crossorigin","crossorigin");return e.find(".block-audio-video").find(".video").remove(),e.find(".block-audio-video").find(".source").remove(),e.find(".block-audio-video").find(".track").remove(),e.find(".block-audio-video").prepend(n),e},preloadVideo:function(t,e){var i=this,n=s.settings.slides.eq(t);if(0===n.find("video").length){var a=760,r=$(window).width();s.settings.slider.addClass("loading"),n.addClass("videoLoading"),n.addClass("hasVideo"),$videoWrapper=o.eq(t).parent("li").find(".lightboxVideo");var d=this.buildVideoElm($videoWrapper),l=d.find(".block-audio-video");r<a?l.css({width:r-40+"px"}):l.css({width:a+"px"}),d.appendTo(n),d.createPlayer({onready:function(t){i.invideoActions(n),setTimeout(function(){n.removeClass("videoLoading"),s.settings.slider.removeClass("loading"),"play"===e&&t.play()},500)}})}},setVideoQue:function(t){var e=this,i=[];i.push(t),i.push(t-1),i.push(t+1),s.settings.slider.find(".hasVideo").each(function(){var t=s.settings.slides.index($(this));$.inArray(t,i)===-1&&e.unloadVideo(t)}),$.each(i,function(t,i){e.preloadVideo(i)})},unloadVideo:function(t){var e=s.settings.slides.eq(t);e.find("video").trigger("pause"),setTimeout(function(){e.html(""),e.removeAttr("style"),e.removeClass("hasVideo")},500)},pauzeVideo:function(t){var e=s.settings.slides.eq(t);e.find("video").trigger("pause")},invideoActions:function(t){var e=t.find(".collapsiblePanels"),i=e.find("button");i.on("click",function(){var t=$(this).parent(".panel");t.hasClass("open")?s.settings.overlay.animate({scrollTop:e.position().top-50},500):s.settings.overlay.animate({scrollTop:0},250)})},setTitle:function(t){var e="";e="video"===s.settings.content?o.eq(t).find("h3").text():this.getAttribValue(o.eq(t),"titleAttr");var i=$("#swipebox-caption .caption-meta p.title");i.empty(),e&&i.text(e).append()},setCopyright:function(t){var e=this.getAttribValue(o.eq(t),"copyrightAtrr"),i=this.getAttribValue(o.eq(t),"imagelabel"),s=$("#swipebox-caption .caption-meta p.copyright");s.empty(),e&&s.text(i+": Â© "+e).append()},setCredits:function(t){var e=this.getAttribValue(o.eq(t),"copyrightAtrr"),i=this.getAttribValue(o.eq(t),"creditsAttr"),s=this.getAttribValue(o.eq(t),"imagelabel"),n=$("#swipebox-caption .caption-meta p.meta");n.empty(),i&&e?n.append().text(" "+i):i&&n.append().text(s+" "+i)},setHres:function(t){var e=this.getAttribValue(o.eq(t),"hresUrlAttr"),i=this.getAttribValue(o.eq(t),"hresTextAttr"),s=$("#swipebox-caption .caption-meta p.hres");s.empty(),e&&s.append('<a href="'+e+'">'+i+"</a> ")},setMeta:function(t){$(".caption-meta p.title").is(":empty")&&$(".caption-meta p.meta").is(":empty")&&$(".caption-meta p.hres").is(":empty")&&$(".caption-meta p.copyright").is(":empty")?$("#swipebox-caption").css({display:"none"}):$("#swipebox-caption").css({display:"block"})},setSlideSize:function(t){var e=$(window).height(),i=46,n=i;$("#swipebox-caption").is(":visible")&&(n=$("#swipebox-caption").outerHeight()+i);var a=e-n-i,o=50;'"desktop"'!==s.settings.displayType&&(o=15),""!==s.settings.currSlide&&(s.settings.currSlide.css({"margin-top":i+"px",height:a+"px","padding-left":o+"px","padding-right":o+"px"}),this.setVideoSize(t))},setVideoSize:function(t){var e=760,i=$(window).width(),n=s.settings.overlay.find(".block-audio-video");i<e?n.css({width:i-40+"px"}):n.css({width:e+"px"})},positionNextPrevBtns:function(){var t=s.settings.prevBtn.outerHeight(),e=-t;if('"desktop"'===s.settings.displayType){var i=$(window).height();e=i/2-t-50,s.settings.prevBtn.css({top:e}),s.settings.nextBtn.css({top:e})}else s.settings.nextBtn.removeAttr("style"),s.settings.prevBtn.removeAttr("style")},getNext:function(){if("ready"===s.settings.state&&(this.resetSlide(),"gallery"===s.settings.type)){var t=this;s.settings.currSlide.find("img").removeAttr("style"),n=s.settings.slides.index(s.settings.currSlide),n+1<o.length&&(n++,t.setSlide(n),"video"===s.settings.content?(t.pauzeVideo(n-1),t.preloadVideo(n,"none"),t.setVideoQue(n)):t.preloadImg(n+1))}},getPrev:function(){if("ready"===s.settings.state&&(this.resetSlide(),"gallery"===s.settings.type)){var t=this;s.settings.currSlide.find("img").removeAttr("style"),n=s.settings.slides.index(s.settings.currSlide),n>0&&(n--,t.setSlide(n),"video"===s.settings.content?(t.pauzeVideo(n+1),t.preloadVideo(n,"none"),t.setVideoQue(n)):t.preloadImg(n-1))}},resetSlide:function(){s.settings.overlay.animate({scrollTop:0},50),"video"===s.settings.content&&$(".panel.open").length>0&&($panelButton=$(".panel.open").find("button"),$panelButton.trigger("click"))},closeSlide:function(){var t=this;$("body").removeClass("swipebox-overflow-hidden"),s.settings.overlay.animate({opacity:0},"fast"),setTimeout(function(){s.settings.overlay.removeClass("visible"),t.destroy()},1e3),s.settings.isOpen=!1,s.settings.page.attr("aria-hidden","false"),s.settings.overlay.attr("aria-hidden","true"),s.settings.modal.attr("tabindex","-1"),setTimeout(function(){s.settings.lastFocus.focus()},1)},destroy:function(){$(window).unbind("keyup"),$("body").unbind("touchstart"),$("body").unbind("touchend"),s.settings.slider.unbind(),s.settings.overlay.remove(),r=!1,o.removeData("_swipebox")}};s.init()},$.fn.swipebox=function(t){if(!$.data(this,"_swipebox")){var e=new $.swipebox(this,t);this.data("_swipebox",e)}},$("noscript + ul").show(),$(".block-photo-gallery").length>0&&$(".block-photo-gallery .item[data-href]").swipebox({hideBarsDelay:6e3,hrefAttr:"data-href",titleAttr:"data-bijschrift",copyrightAtrr:"data-copyright",imagelabel:"data-imagelabel",creditsAttr:"title",hresUrlAttr:"data-hresurl",hresTextAttr:"data-hrestext"}),$(".swbox").find("img:not(.hasOptions)").length>0&&$(".swbox").find("img").swipebox({hideBarsDelay:200,hrefAttr:"data-hresimg",titleAttr:"data-caption",copyrightAtrr:"data-copyright",imagelabel:"data-imagelabel",creditsAttr:"data-credits",hresUrlAttr:"data-hresurl",hresTextAttr:"data-hrestext",type:"single"});