(function(e){var t={sort:!1,"sort-attr":"data-priority","sort-desc":!1,autoselect:!0,"alternative-spellings":!0,"alternative-spellings-attr":"data-alternative-spellings","remove-valueless-options":!0,"copy-attributes-to-text-field":!0,"autocomplete-plugin":"jquery_ui","relevancy-sorting":!0,"relevancy-sorting-partial-match-value":1,"relevancy-sorting-strict-match-value":5,"relevancy-sorting-booster-attr":"data-relevancy-booster",minLength:0,delay:0,autoFocus:!0,handle_invalid_input:function(e){var t="option:selected:first";e.settings["remove-valueless-options"]&&(t='option:selected[value!=""]:first'),e.$text_field.val(e.$select_field.find(t).text())},handle_select_field:function(e){return e.hide()},insert_text_field:function(n){var r=e('<input type="text" aria-autocomplete="inline" id="land" role="combobox"></input>');if(t["copy-attributes-to-text-field"]){var i={},s=n.$select_field[0].attributes;for(var o=0;o<s.length;o++){var u=s[o].nodeName,a=s[o].nodeValue;u!=="name"&&u!=="id"&&typeof n.$select_field.attr(u)!="undefined"&&(i[u]=a)}r.attr(i)}r.blur(function(){var i=n.$select_field.find("option").map(function(t,n){return e(n).text()});e.inArray(r.val(),i)<0&&typeof t.handle_invalid_input=="function"&&t.handle_invalid_input(n)}),n.settings.autoselect&&r.click(function(){this.select()});var f="option:selected:first";return n.settings["remove-valueless-options"]&&(f='option:selected[value!=""]:first'),r.val(n.$select_field.find(f).text()).insertAfter(n.$select_field)},extract_options:function(n){var r=[],i=n.find("option"),s=i.length;return i.each(function(){var n=e(this),i={"real-value":n.attr("value"),label:n.text()};if(!t["remove-valueless-options"]||i["real-value"]!==""){i.matches=i.label;var o=n.attr(t["alternative-spellings-attr"]);o&&(i.matches+=" "+o);if(t.sort){var u=parseInt(n.attr(t["sort-attr"]),10);u?i.weight=u:i.weight=s}if(t["relevancy-sorting"]){i["relevancy-score"]=0,i["relevancy-score-booster"]=1;var a=parseFloat(n.attr(t["relevancy-sorting-booster-attr"]));a&&(i["relevancy-score-booster"]=a)}r.push(i)}}),t.sort&&(t["sort-desc"]?r.sort(function(e,t){return t.weight-e.weight}):r.sort(function(e,t){return e.weight-t.weight})),r}},n={init:function(n){return/msie/.test(navigator.userAgent.toLowerCase())&&parseInt(navigator.appVersion,10)<=6?this:(t=e.extend(t,n),this.each(function(){var n=e(this),i={$select_field:n,options:t.extract_options(n),settings:t};i.$text_field=t.insert_text_field(i),t.handle_select_field(n),typeof t["autocomplete-plugin"]=="string"?r[t["autocomplete-plugin"]](i):t["autocomplete-plugin"](i)}))}},r={jquery_ui:function(t){var n=function(n){var r=n.split(" "),i=[];for(var s=0;s<r.length;s++)if(r[s].length>0){var o={};o.partial=new RegExp(e.ui.autocomplete.escapeRegex(r[s]),"i"),t.settings["relevancy-sorting"]&&(o.strict=new RegExp("^"+e.ui.autocomplete.escapeRegex(r[s]),"i")),i.push(o)}return e.grep(t.options,function(e){var r=0;if(t.settings["relevancy-sorting"])var s=!1,o=e.matches.split(" ");for(var u=0;u<i.length;u++){i[u].partial.test(e.matches)&&r++;if(t.settings["relevancy-sorting"])for(var a=0;a<o.length;a++)if(i[u].strict.test(o[a])){s=!0;break}}if(t.settings["relevancy-sorting"]){var f=0;f+=r*t.settings["relevancy-sorting-partial-match-value"],s&&(f+=t.settings["relevancy-sorting-strict-match-value"]),f*=e["relevancy-score-booster"],e["relevancy-score"]=f}return!n||i.length===r})},r=function(e){if(e)t.$select_field.val()!==e["real-value"]&&(t.$select_field.val(e["real-value"]),t.$select_field.change());else{var n=t.$text_field.val().toLowerCase(),r={"real-value":!1};for(var i=0;i<t.options.length;i++)if(n===t.options[i].label.toLowerCase()){r=t.options[i];break}t.$select_field.val()!==r["real-value"]&&(t.$select_field.val(r["real-value"]||""),t.$select_field.change()),r["real-value"]&&t.$text_field.val(r.label),typeof t.settings.handle_invalid_input=="function"&&t.$select_field.val()===""&&t.settings.handle_invalid_input(t)}};t.$text_field.autocomplete({minLength:t.settings.minLength,delay:t.settings.delay,autoFocus:t.settings.autoFocus,source:function(e,r){var i=n(e.term);t.settings["relevancy-sorting"]&&(i=i.sort(function(e,t){return t["relevancy-score"]==e["relevancy-score"]?t.label<e.label?1:-1:t["relevancy-score"]-e["relevancy-score"]})),r(i)},select:function(e,t){r(t.item)},change:function(e,t){r(t.item)}}),t.$text_field.parents("form:first").submit(function(){r()}),r()}};e.fn.selectToAutocomplete=function(t){if(n[t])return n[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return n.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.fn.selectToAutocomplete")}})(jQuery),$.fn.autoComplete=function(){this.each(function(){var e=$(this),t=$("select",e);t.selectToAutocomplete({where:e.parent(),"relevancy-sorting":!1})})},$("p.autocomplete").autoComplete()
