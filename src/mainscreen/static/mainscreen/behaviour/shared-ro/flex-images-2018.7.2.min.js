(function(e){function t(e,n,r,s){function v(e){r.maxRows&&f>r.maxRows||r.truncate&&e&&f>1?c[o][0].style.display="none":(c[o][4]&&(c[o][3].attr("src",c[o][4]),c[o][4]=""),c[o][0].style.width=u+"px",c[o][0].style.height=d+"px",c[o][0].style.display="block")}var o,u,a=1,f=1,l=e.width()-2,c=[],p=0,d=r.rowHeight;l||(l=e.width()-2);for(i=0;i<n.length;i++){c.push(n[i]),p+=n[i][2]+r.margin;if(p>=l){var m=c.length*r.margin;a=(l-m)/(p-m),d=Math.ceil(r.rowHeight*a),exact_w=0;for(o=0;o<c.length;o++)u=Math.ceil(c[o][2]*a),exact_w+=u+r.margin,exact_w>l&&(u-=exact_w-l),v();c=[],p=0,f++}}for(o=0;o<c.length;o++)u=Math.floor(c[o][2]*a),h=Math.floor(r.rowHeight*a),v(!0);!s&&l!=e.width()&&t(e,n,r,!0)}e.fn.flexImages=function(n){var r=e.extend({container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0},n);return this.each(function(){var n=e(this),i=e(n).find(r.container),s=[],u=(new Date).getTime(),a=window.getComputedStyle?getComputedStyle(i[0],null):i[0].currentStyle;r.margin=(parseInt(a.marginLeft)||0)+(parseInt(a.marginRight)||0)+(Math.round(parseFloat(a.borderLeftWidth))||0)+(Math.round(parseFloat(a.borderRightWidth))||0);for(j=0;j<i.length;j++){var f=i[j],l=parseInt(f.getAttribute("data-w")),c=l*(r.rowHeight/parseInt(f.getAttribute("data-h"))),h=e(f).find(r.object);s.push([f,l,c,h,h.data("src")])}t(n,s,r),e(window).off("resize.flexImages"+n.data("flex-t")),e(window).on("resize.flexImages"+u,function(){t(n,s,r)}),n.data("flex-t",u)})}})(jQuery),$(".flex-images").flexImages({rowHeight:180})
